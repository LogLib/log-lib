---
title: Server
description: How to setup the server
---

First you need to setup a database and an adapter for the server to work.

<Callout>
  We currently only support prisma and supabase adapters but more adapters are
  on the way.
</Callout>

See on [nextjs with supabase](/get-started/next-js-with-supabase) or [nextjs with prisma](/get-started/next-js-with-supabase)
to see how to setup one. Then you need to create a server handler that will handle
the requests from the tracker. Also you can see that on the above links.

### Resolving User Location from IP

For getting user location using their ip you have 3 options:

1. Deploy it in vercel and that's it!
2. If you're not deploying it on serverless environment you can setup maxmind using a cli command

```bash
pnpm loglib setup:maxmind
```

> This will download the maxmind database and put it in your project root directory under geo folder.

3. you can also provide a custom implementation for getting the user location by passing a function to the `getLocation` option.

```ts
import { createServer } from "@loglib/next"
import { PrismaClient } from "@prisma/client"
import { prismaAdapter } from "@loglib/prisma-adapter"

const db = new PrismaClient()
const POST = Next13({
  adapter: prismaAdapter(db),
  async getLocation(ip) {
    // do your thing
    return {
      city: "city",
      country: "country",
    }
  },
})
```

You can disable location from being resolved by passing `true` to the `disableLocation` option.

```ts
import { createServer } from "@loglib/next"
import { PrismaClient } from "@prisma/client"
import { prismaAdapter } from "@loglib/prisma-adapter"

const db = new PrismaClient()

const POST = Next13({
  adapter: prismaAdapter(db),
  disableLocation: true,
})
```

You can turn on authentication to guard your both api endpoint and dashboard by passing `secret` to the `auth` option. Make sure to include this environment variables in your .env file to access your dashboard.

`LOGLIB_USERNAME`  
`LOGLIB_PASSWORD`
`LOGLIB_SECRET`

```ts
//generated by loglib
import { prismaAdapter } from "@loglib/prisma-adapter"
import { createServer } from "@loglib/next"
import { PrismaClient } from "@prisma/client"

const db = new PrismaClient()

export default createServer({
  adapter: prismaAdapter(db),
  auth: { secret: process.env.LOGLIB_SECRET as string },
})
```
